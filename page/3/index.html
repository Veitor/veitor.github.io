<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Veitor的技术点滴</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="php,CQRS,DDD,Event Sourcing,linux,Yii,kubernetes,golang,docker,互联网,化龙巷,常州">
<meta property="og:type" content="website">
<meta property="og:title" content="Veitor的技术点滴">
<meta property="og:url" content="http:&#x2F;&#x2F;www.veitor.net&#x2F;page&#x2F;3&#x2F;index.html">
<meta property="og:site_name" content="Veitor的技术点滴">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Veitor的技术点滴" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Veitor的技术点滴</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">PHP,DDD,CQRS,Event Sourcing,Kubernetes,Docker,Golang</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.veitor.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-pear-e5-ae-89-e8-a3-85" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/01/07/pear-e5-ae-89-e8-a3-85/" class="article-date">
  <time datetime="2015-01-07T00:45:13.000Z" itemprop="datePublished">2015-01-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/PHP/">PHP</a>►<a class="article-category-link" href="/categories/PHP/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a>►<a class="article-category-link" href="/categories/PHP/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a>►<a class="article-category-link" href="/categories/PHP/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/07/pear-e5-ae-89-e8-a3-85/">pear安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>说到安装pear，我是因为给一个变量起一个名字，联想到了如何起名才规范，于是又联想到了PHPDocument，要安装PHPDocument可以通过pear安装和手动下载安装，于是乎我就折腾起了这个pear的安装。 根据：<a href="http://pear.php.net/manual/en/installation.getting.php中的内容翻译得来" target="_blank" rel="noopener">http://pear.php.net/manual/en/installation.getting.php中的内容翻译得来</a> 点此<a href="http://pear.php.net/go-pear.phar下载文件到本地并命名为go-pear.phar进行保存。在cmd中输入php" target="_blank" rel="noopener">http://pear.php.net/go-pear.phar下载文件到本地并命名为go-pear.phar进行保存。在cmd中输入php</a> go-pear.phar 开始安装。</p>
<p>Are you installing a system-wide PEAR or a local copy?<br>(system|local) [system] :</p>
<p>** 选择系统级别安装还是安装本地，默认是system，直接按回车继续。**</p>
<p>Below is a suggested file layout for your new PEAR installation.  To<br>change individual locations, type the number in front of the<br>directory.  Type ‘all’ to change all of them or simply press Enter to<br>accept these locations.<br> 1. Installation base ($prefix)                   : D:\php5<br> 2. Temporary directory for processing            : D:\php5\tmp<br> 3. Temporary directory for downloads             : D:\php5\tmp<br> 4. Binaries directory                            : D:\php5<br> 5. PHP code directory ($php_dir)                 : D:\php5\pear<br> 6. Documentation directory                       : D:\php5\docs<br> 7. Data directory                                : D:\php5\data<br> 8. User-modifiable configuration files directory : D:\php5\cfg<br> 9. Public Web Files directory                    : D:\php5\www<br>10. Tests directory                               : D:\php5\tests<br>11. Name of configuration file                    : C:\Windows\pear.ini<br>12. Path to CLI php.exe                           : D:\php5<br>1-12, ‘all’ or Enter to continue:</p>
<p><strong>以上是默认的pear的临时、数据、配置、测试、执行目录的设置，第11项默认的话会显示错误，我所以还是改到了D:\php5目录下（输入需要改的数字项，会提示让你输入新的目录地址，不改的话啥也不用输入直接回车）。然后回车。</strong> <strong>然后一系列安装，其中有以下这个警告：</strong></p>
<p>WARNING!  The include_path defined in the currently used php.ini does not<br>contain the PEAR PHP directory you just specified:<br>&lt;D:\php5\pear&gt;<br>If the specified directory is also not in the include_path used by<br>your scripts, you will have problems getting any PEAR packages working.<br>Would you like to alter php.ini&lt;D:\php5\php.ini&gt;?[Y/n]</p>
<p><strong>需要将pear配置目录D:\php5\pear加入php.ini的include_path指令中。输入Y后自动修改php.ini中的路径。</strong></p>
<p>php.ini &lt;D:\php5\php.ini&gt; include_path updated.<br>Current include path           : .;C:\php\pear<br>Configured directory           : D:\php5\pear<br>Currently used php.ini (guess) : D:\php5\php.ini<br>Press Enter to continue:</p>
<p>** 到这里也没啥了，按回车基本安装成功了。会在D:\php5下面生成一个PEAR_ENV.reg的文件，双击运行进行注册表注册即可。** 通过命令pear install package安装程序包，如果出现failed to mkdir的错误，只要以管理员身份重新运行cmd即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2015/01/07/pear-e5-ae-89-e8-a3-85/" data-id="ck3hcwyeu00651qxicc0n7s1g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pear/" rel="tag">pear</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-http-e5-8d-8f-e8-ae-ae-e6-98-af-e5-a6-82-e4-bd-95-e5-b7-a5-e4-bd-9c-e7-9a-84" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/01/06/http-e5-8d-8f-e8-ae-ae-e6-98-af-e5-a6-82-e4-bd-95-e5-b7-a5-e4-bd-9c-e7-9a-84/" class="article-date">
  <time datetime="2015-01-06T06:44:24.000Z" itemprop="datePublished">2015-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/PHP/">PHP</a>►<a class="article-category-link" href="/categories/PHP/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/06/http-e5-8d-8f-e8-ae-ae-e6-98-af-e5-a6-82-e4-bd-95-e5-b7-a5-e4-bd-9c-e7-9a-84/">HTTP协议是如何工作的</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>浏览网页时HTTP协议的主要应用，但是这并不代表HTTP协议就只能应用于网页的浏览，只要通信的双方都遵守HTTP协议，其就有用武之地。比如腾讯QQ、迅雷等软件都是用HTTP协议（当然还包括其他的协议）。 那么HTTP协议是如何工作的呢？ 首先，客户端发送一个请求给服务器，服务器在接收到这个请求后将生成响应返回给客户端。一次HTTP操作成为一个事务，其工作过程可分为四步： 1、客户机与服务器需要建立连接，单击某个超链接，HTTP协议的工作开始。 2、建立连接后，客户机发送一个请求给服务器。格式为：前边是统一资源标识符（URL）、中间是协议版本号，后边是MIME信息（包括请求修饰符、客户机信息和可能的内容） 3、服务器接收到请求后，给予相应的相应信息。格式为：首先是一个状态行（包括信息的协议版本号、一个成功或错误的代码），然后是MIME信息（包括服务器信息、实体信息和可能的内容） 4、客户端接收服务器返回的信息并显示在用户的显示屏上，然后客户机与服务器断开连接。   如果以上过程中的某一步出现错误，产生错误的信息将返回到客户端，有显示屏输出。对于用户来说，这些过程是由HTTP协议自己完成的，用户只要用鼠标点击等待信息显示就可以了。</p>
<blockquote>
<p><strong>请求</strong></p>
</blockquote>
<p>HTTP请求由三部分组成：请求行、消息报头、请求正文。请求行以一个请求方式符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式为：Method Request-URI HTTP-Version CRLF   比如我请求本站某页面：<a href="http://www.veitor.net/cate/bianchengyuyan">http://www.veitor.net/cate/bianchengyuyan</a> 请求行如图 <a href="http://storage.veitor.net/uploads/2015/01/QQ截图20150106220345.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2015/01/QQ%E6%88%AA%E5%9B%BE20150106220345.jpg" alt="QQ截图20150106220345"></a> 参数说明：</p>
<ul>
<li>Method：请求方法。截图中为GET。</li>
<li>Request-URI：一个统一资源标识符，截图中为/cate/bianchengyuyan</li>
<li>HTTP-Version：请求的HTTP协议版本，截图中为1.1</li>
<li>CRLF：回车和换行符</li>
</ul>
<blockquote>
<p><strong>响应</strong></p>
</blockquote>
<p>在接收和解释请求消息后，服务器返回一个HTTP响应消息。HTTP相应也由三个部分组成。分别是：状态行、消息报头、响应正文。状态行格式为：HTTP-Version Status-Code Reason-Phrase CRLF 比如我请求本站某页面：<a href="http://www.veitor.net/cate/bianchengyuyan">http://www.veitor.net/cate/bianchengyuyan</a> <a href="http://storage.veitor.net/uploads/2015/01/QQ截图20150106221255.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2015/01/QQ%E6%88%AA%E5%9B%BE20150106221255.jpg" alt="QQ截图20150106221255"></a>   参数说明如下：</p>
<ul>
<li>HTTP-Version：服务器HTTP协议的版本，截图中为1.1</li>
<li>Status-Code：服务器发回的响应状态码，截图中为200</li>
<li>Reason-Phrase：状态代码的文本描述，截图中为OK</li>
</ul>
<p>其中状态代码由三位数字组成，第一个数字定义了响应的类别，有五种可能取值：</p>
<ol>
<li>1xx：指示信息——请求已接收，继续处理。</li>
<li>2xx：成功——请求已被成功接收、理解、接受</li>
<li>3xx：重定向——要完成请求必须进行更进一步的操作</li>
<li>4xx：客户端错误——请求有语法错误或请求无法实现</li>
<li>5xx：服务器错误——服务器未能实现合法的请求</li>
</ol>
<p>常见的状态码、状态描述和说明如下：</p>
<ul>
<li>200 OK：客户端请求成功</li>
<li>400 Bad Request：客户端请求有语法错误，不能被服务器所理解</li>
<li>401 Unauthorize：请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用</li>
<li>403 Forbidden：服务器收到请求，但是拒绝提供服务</li>
<li>404 Not Found：请求资源不存在，例如输入了错误的URL</li>
<li>500 Internal Server Error：服务器发生不可预期的错误</li>
<li>503 Server Unavailable：服务器当前不能处理客户端的请求，一段时间后可能恢复正常</li>
</ul>
<blockquote>
<p><strong>报头</strong></p>
</blockquote>
<p>HTTP消息报头包括普通报头、请求报头、响应报头、实体报头。每个报头域组成形式如下：</p>
<ol>
<li><p>普通报头中有少数报头域用于所有的请求和响应消息，但并不用于被传输的实体，只用于传输的消息（如缓存控制、连接控制）</p>
</li>
<li><p>请求报头允许客户端向服务器端传递请求的附加信息以及客户端自身的信息（如UA头、Accept等）</p>
</li>
<li><p>响应报头允许服务器传递不能放在状态行中的附加响应信息，以及关于服务器的信息和对Request-URL所标的资源进行下一步访问的信息（如Location）</p>
</li>
<li><p>实体报头定义了关于实体正文和请求所标识的资源的元信息，例如有无实体正文。</p>
<p>比较重要的几个报头如下（可以结合着上面的截图看）：</p>
</li>
</ol>
<ul>
<li><p>Host：头域指定请求资源的Internet主机和端口号，必须表示请求URL的原始服务器或网关的位置。HTTP1.1请求必须包含主机头域，否则系统会以400状态码返回。</p>
</li>
<li><p>User-Agent：简称UA，内容包含发出请求的用户信息。通常UA包含浏览者的信息，主要是浏览器的名称版本和所用的操作系统。在上面的截图中可以看到，我的客户端电脑使用的是Gecko渲染引擎的浏览器，我用的Chrome，操作系统为Windows NT6.1的内核，即Windows 7操作系统（内核版本号和操作系统代号不是一一对应的）。这个UA头不仅仅是使用浏览器才存在，只要使用了基于HTTP协议的客户端软件都会发送这个请求，无论是手机端还是PDA等，这个UA头是辨别客户端所用设备的重要依据</p>
</li>
<li><p>Accept：告诉服务器可以接受的文件格式，通常这个值在各种浏览器中都差不多。不过Wap浏览器所能接受的格式要少一点，这也是用来区分WAP和计算机浏览器的主要依据之一。随着WAP浏览器的升级，其已经和计算机浏览器越来越接近，因此这个判断所起的作用越来越弱。</p>
</li>
<li><p>Cookie：Cookie分两种，一种是客户端向服务器端发送的，使用Cookie报头，用来标记一些信息；另一种是服务器发送给浏览器的，报头为Set-Cookie。两者的区别是Cookie报头的value里可以有多个cookie值，并且不需要显式指定domain等。而set-Cookie报头里一条记录只能有一个Cookie的value，需要指明domain、path等</p>
</li>
<li><p>Cache-Control：指定请求和响应遵循的缓存机制。在请求消息或响应消息中设置Cache-Control并不会选择另一个消息处理过程中的缓存处理过程。请求时的缓存指令包括no-cache、no-store、max-age、max-stale、min-fresh、only-if-cached；响应消息中的指令包括public、private、no-cache、no-store、no-transform、must-revalidate、proxy-revalidate、max-age</p>
</li>
<li><p>Referer：头域允许客户端指定请求URI的资源地址，这可以允许服务器生成回退链表，可以用来登录、优化缓存等。也允许废除的或错误的连接由于维护的目的而被追踪。如果请求的URI没有自己的URI地址，Referer不能被发送。如果指定的是部分URI地址，则此地址应该是一个相对地址。Referer通常是流量统计系统来记录来访者地址的参数。</p>
</li>
<li><p>Content-Length：内容长度</p>
</li>
<li><p>Content-Range：响应的资源范围。可以在每次请求中标记请求的资源范围，在连接断开重连时，客户端只请求该资源未下载的部分，而不是重新请求整个资源，<strong>实现断点续传</strong>。迅雷就是基于这个原理，使用多线程分段读取网络上的资源，最后再合并。</p>
</li>
<li><p>Accept-Encoding：指定所能接受的编码方式。通常服务器会对页面进行GZIP压缩后再输出以减少流量，一般浏览器均支持对这种压缩后的数据进行处理。但对于我们来说，如果不想接受到这些看似“乱码”的数据，可以指定不接受任何服务器端压缩处理，要求其原样返回</p>
</li>
<li><p>自定义报头：在HTTP消息中，也可以使用一些HTTP1.1正式规范里没有定义的头字段，这些头字段统称为自定义的HTTP头或者扩展头。比如上面截图中X-Powered-By字段，这是由服务器发送的。在PHP里，使用header函数即可实现。</p>
<p>参考：《PHP核心技术与最佳实践》</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2015/01/06/http-e5-8d-8f-e8-ae-ae-e6-98-af-e5-a6-82-e4-bd-95-e5-b7-a5-e4-bd-9c-e7-9a-84/" data-id="ck3hcwygq00b31qxi0xf3axh4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-e4-b9-b1-e7-a0-81-e9-97-ae-e9-a2-98-e8-a7-a3-e5-86-b3-e6-96-b9-e6-b3-95" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/01/05/python-e4-b9-b1-e7-a0-81-e9-97-ae-e9-a2-98-e8-a7-a3-e5-86-b3-e6-96-b9-e6-b3-95/" class="article-date">
  <time datetime="2015-01-05T17:46:19.000Z" itemprop="datePublished">2015-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>►<a class="article-category-link" href="/categories/Python/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a>►<a class="article-category-link" href="/categories/Python/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a>►<a class="article-category-link" href="/categories/Python/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/05/python-e4-b9-b1-e7-a0-81-e9-97-ae-e9-a2-98-e8-a7-a3-e5-86-b3-e6-96-b9-e6-b3-95/">Python乱码问题解决方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近要写个python脚本，遇到各种乱码问题，后来一查原来python乱码问题还真是层出不穷，让人头疼啊。 我主要是用的sublime进行脚本编写，使用cmd或python自带的GUI运行脚本调试查看。 比如下列的脚本代码在运行时会产生乱码</p>
<p>#coding:utf-8<br>print “的是”</p>
<p><a href="http://storage.veitor.net/uploads/2015/01/QQ截图20150106092343.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2015/01/QQ%E6%88%AA%E5%9B%BE20150106092343.jpg" alt="QQ截图20150106092343"></a>因为编写代码时保存的编码为UTF-8，而在Windows中运行读取脚本时以系统的编码GBK去执行，因此GBK与UTF-8冲突导致编码错误。</p>
<p>解决方法有三种：</p>
<blockquote>
<p>1、我们往往在代码顶部加入#coding:utf-8 这样指明解码时的字符集，而指明utf-8还是会出现所说的乱码，还是因为运行时采用的GBK与我们指定的UTF-8冲突。所以要指明编码的话就只好指明为和系统编码一样的字符集，如这样指明#coding:gbk ，不写coding的话默认为与系统一样的编码</p>
<p><a href="http://storage.veitor.net/uploads/2015/01/QQ截图20150106094006.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2015/01/QQ%E6%88%AA%E5%9B%BE20150106094006.jpg" alt="QQ截图20150106094006"></a></p>
<p>2、在打印的字符前加上u，如print u”是” ，这样就指明了使用头部coding指定的字符集解码，当然前提是要在头部添加coding，并且coding所指的的字符集与操作系统用的字符集一样（刚才第一条说明了）</p>
<p><a href="http://storage.veitor.net/uploads/2015/01/QQ截图20150106094135.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2015/01/QQ%E6%88%AA%E5%9B%BE20150106094135.jpg" alt="QQ截图20150106094135"></a></p>
<p>3、输出时指定使用的字符集，如print ‘是’.decode(‘utf-8’)</p>
<p><a href="http://storage.veitor.net/uploads/2015/01/QQ截图20150106094339.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2015/01/QQ%E6%88%AA%E5%9B%BE20150106094339.jpg" alt="QQ截图20150106094339"></a></p>
</blockquote>
<p>当然保存脚本时的编码要与coding一样。 另外据说还有种方法是加入这三行代码：</p>
<p>import sys<br>reload(sys)<br>sys.setdefaultencoding(‘utf-8’)</p>
<p>这种方法我没试过，看起来好像是从系统编码进行下手的，将系统编码临时改掉，这样的话你们懂的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2015/01/05/python-e4-b9-b1-e7-a0-81-e9-97-ae-e9-a2-98-e8-a7-a3-e5-86-b3-e6-96-b9-e6-b3-95/" data-id="ck3hcwyf6006x1qxi5lxcgnex" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A0%81/" rel="tag">编码</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-e5-85-b3-e4-ba-8epython-e6-8f-90-e7-a4-bano-module-named-win32api-e9-97-ae-e9-a2-98-e7-9a-84-e8-a7-a3-e5-86-b3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/22/e5-85-b3-e4-ba-8epython-e6-8f-90-e7-a4-bano-module-named-win32api-e9-97-ae-e9-a2-98-e7-9a-84-e8-a7-a3-e5-86-b3/" class="article-date">
  <time datetime="2014-12-22T00:34:42.000Z" itemprop="datePublished">2014-12-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a>►<a class="article-category-link" href="/categories/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/22/e5-85-b3-e4-ba-8epython-e6-8f-90-e7-a4-bano-module-named-win32api-e9-97-ae-e9-a2-98-e7-9a-84-e8-a7-a3-e5-86-b3/">关于python提示no module named win32api问题的解决</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本篇只介绍对于本机环境下问题的解决方案。我的系统是Win7 64位，并且安装的是64位的python2.7.6版本 当提示“no module named win32api”该信息时，需要安装pywin32模块，原本我是想通过pip安装的，但有问题。 于是上网找了对应的安装包，对应于我的python版本的，如果你也是用的2.7.6 64位的，可以下载我提供的这个附件：<a href="http://www.veitor.net/article/452.html/pywin32-218-win-amd64-py2-7">pywin32-218.win-amd64-py2.7</a> 然后进行安装，如果打开程序安装报错的话，很有可能是找不到python的注册表信息，我的解决方法是重新安装python（当然也有写个脚本进行注册的方法），重装时选择只对本机用户，而不是所有用户。完成后就能成功安装pywin32了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2014/12/22/e5-85-b3-e4-ba-8epython-e6-8f-90-e7-a4-bano-module-named-win32api-e9-97-ae-e9-a2-98-e7-9a-84-e8-a7-a3-e5-86-b3/" data-id="ck3hcwyd800431qxiakyle1e8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sublime-e4-b8-8b-e9-85-8d-e7-bd-ae-e7-bc-96-e8-af-91-e5-92-8c-e8-bf-90-e8-a1-8cc-e7-a8-8b-e5-ba-8f" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/18/sublime-e4-b8-8b-e9-85-8d-e7-bd-ae-e7-bc-96-e8-af-91-e5-92-8c-e8-bf-90-e8-a1-8cc-e7-a8-8b-e5-ba-8f/" class="article-date">
  <time datetime="2014-12-18T23:26:45.000Z" itemprop="datePublished">2014-12-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a>►<a class="article-category-link" href="/categories/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/18/sublime-e4-b8-8b-e9-85-8d-e7-bd-ae-e7-bc-96-e8-af-91-e5-92-8c-e8-bf-90-e8-a1-8cc-e7-a8-8b-e5-ba-8f/">sublime下配置编译和运行C程序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我使用的是sublime3，首先下载MinGW，别问我是啥，我也不怎么了解，网上说 MinGW 提供了一套简单方便的Windows下的基于GCC 程序开发环境，提供了GNU工具集。在这里我就理解它提供了gcc、g++、make等编译器吧。具体自行了解。 你可以上minGW官网<a href="http://www.mingw.org/或其他地方可以下载到，可视化安装界面，自行选择目录安装。比如我安装到了D:\\minGW" target="_blank" rel="noopener">http://www.mingw.org/或其他地方可以下载到，可视化安装界面，自行选择目录安装。比如我安装到了D:\\minGW</a> 安装完毕后，将minGW安装目录下的bin目录添加到环境变量，如下图，我将D:\minGW\bin添加到环境变量</p>
<p><a href="http://storage.veitor.net/uploads/2014/12/QQ图片20141219150247.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2014/12/QQ%E5%9B%BE%E7%89%8720141219150247.jpg" alt="QQ图片20141219150247"></a></p>
<p>接着配置sublime，工具栏选择工具（tools）-编译系统，然后新建一个编译系统</p>
<p><a href="http://storage.veitor.net/uploads/2014/12/QQ图片20141219150736.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2014/12/QQ%E5%9B%BE%E7%89%8720141219150736.jpg" alt="QQ图片20141219150736"></a>输入以下配置：</p>
<p>{<br>    “shell_cmd”: “gcc \“${file}\“ -o \“${file_path}/${file_base_name}\“ -std=c11 -O2 -Wall -lm –static”,<br>    “file_regex”: “^(..[^:]<em>):([0-9]+):?([0-9]+)?:? (.</em>)$”,<br>    “working_dir”: “${file_path}”,<br>    “selector”: “source.c, source.c++”,<br>    “variants”:<br>    [<br>        {<br>            “name”: “Run”,<br>            “shell_cmd”: “gcc -std=c11 -O2 -Wall -lm –static \“${file}\“ -o \“${file_path}/${file_base_name}\“ &amp;&amp; \“${file_path}/${file_base_name}\“”<br>        }<br>    ]<br>}</p>
<p>保存在Sublime Text的Packages目录下即可。 然后敲一段C程序然后保存为.c文件，按ctrl+B会在这文件旁生成exe程序，按ctrl+shift+B会在sublime控制台中显示运行结果（如下图） <a href="http://storage.veitor.net/uploads/2014/12/QQ图片20141219152044.jpg" target="_blank" rel="noopener"><img src="http://storage.veitor.net/uploads/2014/12/QQ%E5%9B%BE%E7%89%8720141219152044.jpg" alt="QQ图片20141219152044"></a>   至此大功告成。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2014/12/18/sublime-e4-b8-8b-e9-85-8d-e7-bd-ae-e7-bc-96-e8-af-91-e5-92-8c-e8-bf-90-e8-a1-8cc-e7-a8-8b-e5-ba-8f/" data-id="ck3hcwyfa00781qxi895g0c7t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sublime/" rel="tag">sublime</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-e5-85-b3-e4-ba-8e-e4-bd-bf-e7-94-a8pdo-e6-97-a0-e6-b3-95-e6-89-a7-e8-a1-8c-e4-b8-a4-e6-ac-a1-e6-9f-a5-e8-af-a2-e7-9a-84-e9-97-ae-e9-a2-98" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/16/e5-85-b3-e4-ba-8e-e4-bd-bf-e7-94-a8pdo-e6-97-a0-e6-b3-95-e6-89-a7-e8-a1-8c-e4-b8-a4-e6-ac-a1-e6-9f-a5-e8-af-a2-e7-9a-84-e9-97-ae-e9-a2-98/" class="article-date">
  <time datetime="2014-12-16T05:38:41.000Z" itemprop="datePublished">2014-12-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>►<a class="article-category-link" href="/categories/Mysql/PHP/">PHP</a>►<a class="article-category-link" href="/categories/Mysql/PHP/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/16/e5-85-b3-e4-ba-8e-e4-bd-bf-e7-94-a8pdo-e6-97-a0-e6-b3-95-e6-89-a7-e8-a1-8c-e4-b8-a4-e6-ac-a1-e6-9f-a5-e8-af-a2-e7-9a-84-e9-97-ae-e9-a2-98/">关于使用PDO无法执行两次查询的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天在使用PDO查询数据时遇到这么一个问题，使用实例化的PDO类无法执行两次查询，即第一次查询是正常的，第二次查询是无效的。 举个栗子：</p>
<p>$pdo = new PDO(‘mysql:host=127.0.0.1;dbname=test;’, ‘root’, ‘’);<br>$stmt1 = $pdo-&gt;query(‘select count(*） from table’);<br>$stmt2 = $pdo-&gt;query(‘select * from table limit 0,5’);</p>
<p>实例化PDO类，调用类中方法query查询一条语句“select count(*) from table”，返回的$stmt1变量是一个PDOStatement对象，而此时没有使用$stmt1这个实例做任何操作（或者只是使用了$stmt1-&gt;fetchColumn()获得了数据数量）。接着再调用PDO实例中的方法query（使用prepare后再execute也一样）再一次查询数据，这是返回给$stmt2变量的值就不是一个PDOStatement对象了，而是false。使用$stmt2-&gt;errorInfo();打印出结果可以看到这么个错误“Cannot execute queries while other unbuffered queries are active.  Consider using PDOStatement::fetchAll().  Alternatively, if your code is only ever going to run against mysql, you may enable query buffering by setting the PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute” 大致意思是说，当一个未缓存查询正在活动时不能再执行查询操作。解决方式有： 1、可以考虑使用前一个查询返回的PDOStatement对象（本例子中是$stmt1）中fetchAll方法把数据处理完毕 2、亦或者是将前一个查询PDOStatement对象设为null：$stmt1=null 3、再或者是连接数据库后使用PDO实例中方法$pdo-&gt;setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true); 设置mysql启用缓冲查询。 这时第二次查询时$stmt2就不会为false了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2014/12/16/e5-85-b3-e4-ba-8e-e4-bd-bf-e7-94-a8pdo-e6-97-a0-e6-b3-95-e6-89-a7-e8-a1-8c-e4-b8-a4-e6-ac-a1-e6-9f-a5-e8-af-a2-e7-9a-84-e9-97-ae-e9-a2-98/" data-id="ck3hcwyd5003v1qxie2zi9gsu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PDO/" rel="tag">PDO</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mysql-e8-bd-ac-e6-8d-a2-e8-a1-a8-e7-9a-84-e5-bc-95-e6-93-8e-e7-9a-84-e4-b8-89-e7-a7-8d-e6-96-b9-e6-b3-95" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/13/mysql-e8-bd-ac-e6-8d-a2-e8-a1-a8-e7-9a-84-e5-bc-95-e6-93-8e-e7-9a-84-e4-b8-89-e7-a7-8d-e6-96-b9-e6-b3-95/" class="article-date">
  <time datetime="2014-12-13T23:37:11.000Z" itemprop="datePublished">2014-12-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/13/mysql-e8-bd-ac-e6-8d-a2-e8-a1-a8-e7-9a-84-e5-bc-95-e6-93-8e-e7-9a-84-e4-b8-89-e7-a7-8d-e6-96-b9-e6-b3-95/">Mysql转换表的引擎的三种方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>ALTER TABLE</p>
</blockquote>
<p>将表从一个引擎修改为另一个引擎最简单的办法就是使用ALTER TABLE语句。下面将mytable的引擎修改为InnoDB：</p>
<p>mysql&gt; ALTER TABLE `mytable` ENGINE = InnoDB；</p>
<p>上述语法可以适用任何存储引擎。担忧一个问题：需要执行很长时间。Mysql会按行将数据从原表复制到一张新的表中，在赋值期间可能会小号系统所有的I\O能力，同时原表上会加上读锁。所以，在繁忙的表上执行此操作要特别小心。一个替代方案是采用下面的导出与导入的方法，手工进行表的复制。</p>
<blockquote>
<p>导出与导入</p>
</blockquote>
<p>为了更好的控制转换过程，可以使用mysqldump工具将数据导出到文件，然后修改文件中CREATE TABLE语句的存储引擎选项，注意同时修改表名，因为同一个数据库中不能存在相同的表名，即使它们使用的是不同的存储引擎。同时要注意mysqldump默认会子的那个在CREATE TABLE语句前加上DROP TABLE语句，不注意这一点可能会导致数据丢失。</p>
<blockquote>
<p>创建与查询（CREATE和SELECT）</p>
</blockquote>
<p>第三种转换的技术综合了第一种方法的高效和第二种方法的安全。不需要导出整个表的数据，而是先创建一个新的存储引擎的表，然后利用INSERT…SELECT语法来导数据：</p>
<p>mysql&gt; CREATE TABLE `innodb_table` LIKE `myisam_table`;<br>mysql&gt; ALTER TABLE `innodb_table` ENGINE = InnoDB;<br>mysql&gt; INSERT INTO `innodb_table` SELECT * FROM `myisam_table`;</p>
<p>数据量不大的话，这样做工作的很好。如果数量很大，则可以考虑做分批处理，针对每一段数据执行事务提交操作，以避免大事务产生过多的undo。假设有主键字段id，重复运行以下语句（最小值x和最大值y进行相应的替换）将数据导入到新表：</p>
<p>mysql&gt; START TRANSACTION;<br>mysql&gt; INSERT INTO `innodb_table` SELECT * FROM `myisam_tale` BETWEEN x AND y;<br>mysql&gt; COMMIT;</p>
<p>这样操作完成以后，新表示原表的一个全量复制，原表还在，如果需要可以删除原表，如果有表要，可以在执行的过程中对原表加锁，以确保新表和原表的数据一致。   Percona Tolkit提供了一个pt-online-schema-change的工具（基于Facebook的在线schema变更技术），可以比较简单、方便的执行上述过程，避免手工操作可能导致的失误和繁琐。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2014/12/13/mysql-e8-bd-ac-e6-8d-a2-e8-a1-a8-e7-9a-84-e5-bc-95-e6-93-8e-e7-9a-84-e4-b8-89-e7-a7-8d-e6-96-b9-e6-b3-95/" data-id="ck3hcwyes00611qxi6rfe1bqz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e4-ba-86-e8-a7-a3mysql-e4-b8-ad-e5-a4-9a-e7-89-88-e6-9c-ac-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/07/e4-ba-86-e8-a7-a3mysql-e4-b8-ad-e5-a4-9a-e7-89-88-e6-9c-ac-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6/" class="article-date">
  <time datetime="2014-12-07T05:27:10.000Z" itemprop="datePublished">2014-12-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/07/e4-ba-86-e8-a7-a3mysql-e4-b8-ad-e5-a4-9a-e7-89-88-e6-9c-ac-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6/">了解mysql中多版本并发控制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前面写的一篇《<a href="http://www.veitor.net/article/427.html" title="了解mysql的并发控制">了解mysql的并发控制</a>》中了解了mysql的并发控制，主要是通过锁机制来控制并发的。控制严格的锁会影响性能，反之则影响数据安全性。而mysql的大多数事务性存储引擎实现的都不是简单的行级锁。基于提升并发性能的考虑，它们一般都同时实现了多版本并发控制（MVCC）。 <strong>可以认为MVCC是行级锁的一个变种，但是它在很多情况下避免了加锁操作，因此开销更低。虽然实现机制有所不同，但大都实现了非阻塞的读操作，写操作也只锁定必要的行。</strong> MVCC的实现，是通过保存数据在某个时间点的快照来实现的。也就是说，不管需要执行多长时间，每个事务看到的数据都是一致的。下面就通过InnoDB的简化版行为说明MVCC是如何工作的： InnoDB的MVCC，是通过在每行记录后面保存两个隐藏的列来实现的。这两个列，一个保存了行的创建时间，一个保存行的过期时间（也叫删除时间）。当然存储的并不是实际的时间值，而是系统的版本号。每开始一个新的事务，系统版本号都会自动递增。事务开始时刻的系统版本号作为事务的版本号，用来和查询到的每行记录的版本号进行比较。下面看一下在REPEATABLE READ（可重复读）隔离级别下，MVCC具体是如何操作的。</p>
<blockquote>
<p>SELECT</p>
</blockquote>
<p>InnoDB会根据以下两个条件检查每行记录： a.InnoDB只查找版本早于当前事务版本的数据行（也就是，行的系统版本号小于或等于事务的系统版本号），这样可以确保事务的读取的行，要么是在事务开始前已经存在的，要么是事务自身插入或者修改过的。 b.行的删除版本要么未定义，要么大于当前事务版本号。这可以确保事务读取到的行，在事务开始之前未被删除。</p>
<blockquote>
<p>INSERT</p>
</blockquote>
<p>InnoDB为新插入的每一行保存当前系统版本号作为行版本号。</p>
<blockquote>
<p>DELETE</p>
</blockquote>
<p>InnoDB为删除的每一行保存保存当前系统版本号作为行删除标识。</p>
<blockquote>
<p>UPDATE</p>
</blockquote>
<p>InnoDB为插入一行新记录，保存当前系统版本号作为行版本号，同时保存当前系统版本号到原来的行作为删除标识。   保存这两个额外系统版本号，使大多数读操作都都可以不用加锁。这样设计使得读数据操作很简单，性能很好，并且也能保证只会读取到符合标准的行。不足之处是每行记录都会需要额外的存储空间，需要做更多的行检查工作，以及一些额外的维护工作。 MVCC只在REPEATABLE READ和READ COMMITTED两个隔离级别下工作。其他两个隔离级别都和MVCC不兼容。因为READ UNCOMMITTED总是读取到最新的数据行（脏读），而不是符合当前事务版本的数据行。而SERIALIZABLE则会对所有读取的行都加锁。（这段内容需要了解mysql隔离级别，请看<a href="http://www.veitor.net/article/319.html" title="Mysql事务以及隔离级别">这篇文章</a>） 如果有疑问，欢迎留言探讨。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2014/12/07/e4-ba-86-e8-a7-a3mysql-e4-b8-ad-e5-a4-9a-e7-89-88-e6-9c-ac-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6/" data-id="ck3hcwybf001n1qxiccr81geq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-e4-ba-86-e8-a7-a3mysql-e4-ba-8b-e5-8a-a1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/04/e4-ba-86-e8-a7-a3mysql-e4-ba-8b-e5-8a-a1/" class="article-date">
  <time datetime="2014-12-04T06:20:56.000Z" itemprop="datePublished">2014-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/04/e4-ba-86-e8-a7-a3mysql-e4-ba-8b-e5-8a-a1/">了解mysql事务</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>mysql事务可能大多数人都有所了解，本篇博文主要记录我了解的事务的一些细节之处，也必然对事务能有进一步的理解。 看过《高性能mysql》一书，上面写道事务就是一组原子性的sql查询，或者说一个独立的工作单元。可能这句话并不是那么好理解，什么叫原子性？什么又是独立的工作单元？看几个例子和几个名词解释或许更加有帮助。 在事务中，如果数据库引擎能够成功地对数据库应用一组查询的全部语句，那么就执行这组查询。如果其中有任何一条语句因为崩溃或其他原因无法执行，那么所有的语句都不会执行。也就是说，事务内的语句，要么全部执行成功，要么全部执行失败。 讲解事务最经典的例子还是银行转帐。假设银行的数据库有两张表：支票表和储蓄表，现在要从用户A的支票账户转义200元到他的储蓄帐户，那么至少需要三个步骤</p>
<blockquote>
<p>1、检查支票账户的余额高于200元。 2、从支票账户余额中减去200元。 3、在储蓄帐户余额中增加200元。</p>
</blockquote>
<p>上面三个步骤操作必须打包在一个事务中，其中任何一个步骤失败，则必须回滚所有步骤，即之前操作的几个步骤都失效。 一般可以用START TRANSACTION语句开始一个事务，然后要么使用COMMIT提交事务将修改的数据持久保留，要么使用ROLLBACK撤销所有的修改。上面三个步骤用语句可以这样表示：</p>
<blockquote>
<p>1、START TRANSACTION; 2、SELECT balance FROM checking WHERE customer_id=123123; 3、UPDATE checking SET balance = balance -200 WHERE customer_id=123123; 4、UPDATE savings SET balance = =balance + 200 WHERE customer_id=123123; 5、COMMIT;</p>
</blockquote>
<p>单纯的讲事务还是不够的。试想一下，如果执行到第四条语句时服务器崩溃了，会发生什么？用户可能会损失200元。再假如，在执行到第三条语句和第四条语句之间时，另一个进程要删除支票账户的所有余额，那么结果可能就是银行在不知情的状况下白了用户200元。 由此看来空谈事务还是不够的，需要通过严格的ACID测试，一个运作良好的事务系统必须具备四个特性，即ACID。这是本篇博文重点要记的，也是我所说的需要记忆的细节之处。下面就介绍一下ACID：</p>
<blockquote>
<h3 id="A、原子性（atomicity）"><a href="#A、原子性（atomicity）" class="headerlink" title="A、原子性（atomicity）"></a>A、原子性（atomicity）</h3></blockquote>
<p>一个事务必须被视为一个不可分割的最小工作单位，整个事务中的所有操作要么全部提交成功，要么全部失败回滚，对于一个事务来说，不可能只执行其中的一部分操作。这也就解开了本篇博文开头的疑问。</p>
<blockquote>
<h3 id="C、一致性（consistency）"><a href="#C、一致性（consistency）" class="headerlink" title="C、一致性（consistency）"></a>C、一致性（consistency）</h3></blockquote>
<p>数据库总是从一个一致性的状态转换到另一个一致性的状态。在前面的例子中，即使在执行第三、四条语句之间时系统崩溃，支票账户中也不会损失200元，储蓄帐户也不会多出200元。因为事务最终没有提交，如果所有语句都顺利执行完成，并且事务也提交成功，那么就转换到了另一个一致性。尤其是在进行多表update的时候，根据业务的操作，在更新前是一个一致性状态，更新成功后又是另一个一致性状态（因为更新后的数据结果就是预期的结果）。</p>
<blockquote>
<h3 id="I、隔离性（isolation）"><a href="#I、隔离性（isolation）" class="headerlink" title="I、隔离性（isolation）"></a>I、隔离性（isolation）</h3></blockquote>
<p>通常来说，一个事务所做的修改在最终提交以前，对其他事务是不可见的，在前面的例子中，当执行完第三条语句，第四条语句还未开始时，此时有另外一个帐户汇总程序开始运行，则其看到的支票账户的额并没有减去200元。在下一篇博文中将理解讨论隔离级别（isolation level），那时你会发现为什么要说“同样来说”是不可见的。当然，关于隔离级别见这篇文章《<a href="http://www.veitor.net/article/319.html" title="Mysql事务以及隔离级别">Mysql事务以及隔离级别</a>》。</p>
<blockquote>
<h3 id="D、持久性（durability）"><a href="#D、持久性（durability）" class="headerlink" title="D、持久性（durability）"></a>D、持久性（durability）</h3></blockquote>
<p>一旦事务提交，则其所做的修改就会永久保存到数据库中。此时系统崩溃也不会影响到已经修改的数据了。话说持久性是个模糊的概念，因为实际上持久性也分很多不同的级别。有些持久性策略能够提供非常强的安全保障，而有些未必。而且不可能有能做到100%的持久性保证的策略（<strong>如果数据库本身就能做到真正的持久性，那么还需要备份来增加持久性做什么呢？</strong>）.   虽然事务的ACID特性可以增加事务处理过程中额外的安全性，但如同锁粒度的升级会增加系统开销一样（详见上一篇博文《<a href="http://www.veitor.net/article/427.html" title="了解mysql的并发控制">了解mysql的并发控制</a>》），这也会需要数据库系统做更多的工作。因此一个实现了ACID的数据库，相比没有实现ACID的数据库，通常会需要更强的CPU处理能力、更大的内存和更多的磁盘空间。当然用户可以根据业务是否需要事务处理，来选择合适的存储引擎。对于一些非事务性的存储引擎，可以获得更高的性能。 本篇重点理解ACID的概念，如有疑问，欢迎留言探讨。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2014/12/04/e4-ba-86-e8-a7-a3mysql-e4-ba-8b-e5-8a-a1/" data-id="ck3hcwybh001q1qxibiyb1uwo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ACID/" rel="tag">ACID</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-e4-ba-86-e8-a7-a3mysql-e7-9a-84-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/02/e4-ba-86-e8-a7-a3mysql-e7-9a-84-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6/" class="article-date">
  <time datetime="2014-12-02T06:08:19.000Z" itemprop="datePublished">2014-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Mysql/">Mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/02/e4-ba-86-e8-a7-a3mysql-e7-9a-84-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6/">了解mysql的并发控制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>关于mysql的并发控制，主要涉及“锁”这个概念。本篇博文为纯文字理论，看似可能有点枯燥，但易于理解也易懂。 何谓“锁”，“锁”是用来干嘛的？我们先来看一个例子，我们以Unix系统的email box为例，这是一个邮箱，邮箱中的所有邮件都串行在一起，彼此首尾相连。这种格式对于读取和分析邮件信息非常友好，同时投递邮件也很容易，只要在文件末尾附加新的邮件内容即可。 那么，问题来了！ 如果有两个进程同一时刻对同一个邮箱投递邮件，会发生什么情况？显然，邮箱的数据会被破坏，两份邮件的内容会交叉的附加在邮箱文件的末尾。那么我们就需要一种东西来控制邮件的投递，使得一个客户投递邮件时，将邮箱锁住，此时其他客户无法对此邮箱进行投递而进入等待，直到这个客户投递完毕解开锁才能进行投递。这就是所谓的“锁”，与mysql中的“锁”概念类似。 <strong>在mysql中主要有两种锁，一个是共享锁（shared lock），一个排他锁（exclusive lock），也分别称为读锁（read lock）和写锁（write lock）。</strong> 读锁是共享的，或者说是相互不阻塞的。多个客户在同一时刻可以同时读取同一个资源，而互不干扰。写锁则是排他的，也就是说一个写锁会阻塞其他的写锁和读锁，这是处于安全策略的考虑，只有这样，才能确保在给定的时间内只有一个用户能执行写入，并防止其他用户读取正在写入的同一资源。</p>
<blockquote>
<h1 id="锁粒度"><a href="#锁粒度" class="headerlink" title="锁粒度"></a>锁粒度</h1></blockquote>
<p>mysql该如何加锁？修改数据时将全部数据都锁定？还是只是锁定要修改的那一块数据？加锁会不会影响性能？这就是要讨论的锁的粒度大小。 锁的粒度影响着共享资源的并发性，所以加锁时应该选择明确的锁定对象。尽量只锁定需要修改的部分数据，而不是所有数据。更理想的方式是，只对会修改的数据片进行精确的锁定。任何时候，在给定的资源上，锁定的数据量越少，则系统的并发程度越高。 however，加锁也是需要消耗资源的，锁的各种操作，包括获得锁、检查锁是否已经解除、释放锁等，都会增加系统开销。 因此，我们需要在追求并发性和数据安全性之间寻求平衡，即如何加锁，制定一个锁策略。 mysql中提供了多种的加锁选择，每种mysql存储引擎都可以实现自己的锁策略和锁粒度。在存储引擎的设计中，锁管理是个非常重要的决定。将锁粒度固定在某个级别，可以为某些特定的应用场景提供更好的性能，但同时却会失去对另外一些场景的良好支持。好在mysql支持多个存储引擎的架构，所以不需要单一的通用的解决方案。 <strong>下面介绍两种锁策略：</strong></p>
<blockquote>
<h2 id="表锁（table-lock）"><a href="#表锁（table-lock）" class="headerlink" title="表锁（table lock）"></a>表锁（table lock）</h2></blockquote>
<p>表锁是mysql中最基本的锁策略，并且是开销最小的策略。表锁非常类似前文描述的邮箱加锁机制：它会锁定整张表。一个用户在对表进行写操作（插入、修改、删除）钱，需要先获得写锁，这会阻塞其他用户对该表的所有读写操作。只有没有写锁时，其他读取的用户才能获得读锁，读锁之间是不会相互阻塞的。 在特定的场景中，表锁也可能有良好的性能。写锁比读锁有更高的优先级，因此一个写锁请求可能会被插入到读锁队列的前面，而读锁则不能插入到写锁的前面。 尽管存储引擎可以管理自己的锁，mysql本身还是会使用各种有效的表锁来实现不同的目的。例如，服务器（详见前面的<a href="http://www.veitor.net/article/415.html" title="简单了解mysql逻辑架构">逻辑架构</a>一文）会为诸如ALTER TABLE之类的语句使用表锁，而忽略存储引擎的锁机制。</p>
<blockquote>
<h2 id="行级锁（row-level-lock）"><a href="#行级锁（row-level-lock）" class="headerlink" title="行级锁（row-level lock）"></a>行级锁（row-level lock）</h2></blockquote>
<p>行级锁可以最大程度的支持并发处理，同时也带来了最大的锁开销。在InnoDB以及其他一些存储引擎中实现了行级锁。行级锁只在存储引擎层实现，而mysql服务器层没有实现。   以上这些就是对mysql并发控制的理解，通过锁机制来有效控制并发。 如有疑问欢迎留言探讨，毕竟我也是刚开始深入学习mysql。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.veitor.net/2014/12/02/e4-ba-86-e8-a7-a3mysql-e7-9a-84-e5-b9-b6-e5-8f-91-e6-8e-a7-e5-88-b6/" data-id="ck3hcwycq003b1qxi2gzqbokl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" rel="tag">存储引擎</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">并发</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/PHP/">PHP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/PHP/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/">Mysql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/PHP/">PHP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/PHP/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">计算机系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%B6%E6%9E%84/">架构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/">程序与生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A8%8B%E5%BA%8F%E4%B8%8E%E7%94%9F%E6%B4%BB/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">计算机系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ACID/" rel="tag">ACID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASCII/" rel="tag">ASCII</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CQRS/" rel="tag">CQRS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/" rel="tag">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event-Sourcing/" rel="tag">Event Sourcing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event-Store/" rel="tag">Event Store</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PDO/" rel="tag">PDO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SVN/" rel="tag">SVN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/URL/" rel="tag">URL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UTF-8/" rel="tag">UTF-8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix/" rel="tag">Unix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yii/" rel="tag">Yii</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/crypt/" rel="tag">crypt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csrf/" rel="tag">csrf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ddd/" rel="tag">ddd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flash/" rel="tag">flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/" rel="tag">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iphone/" rel="tag">iphone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pear/" rel="tag">pear</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/" rel="tag">pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/retina/" rel="tag">retina</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/safari/" rel="tag">safari</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/session/" rel="tag">session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/" rel="tag">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unicode/" rel="tag">unicode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xhprof/" rel="tag">xhprof</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xss/" rel="tag">xss</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E4%BB%B6/" rel="tag">事件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%98%E9%85%B7/" rel="tag">优酷</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%93%E9%AA%8C/" rel="tag">体验</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag">分布式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86/" rel="tag">加密</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E7%A0%81/" rel="tag">原码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8D%E7%A0%81/" rel="tag">反码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" rel="tag">响应式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" rel="tag">存储引擎</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">并发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag">微服务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%88%E6%9D%83/" rel="tag">授权</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E6%9D%BF/" rel="tag">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B/" rel="tag">线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A0%81/" rel="tag">编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E9%80%82%E5%BA%94/" rel="tag">自适应</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8F%9C%E5%8D%95/" rel="tag">菜单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%A5%E7%A0%81/" rel="tag">补码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%84%E8%8C%83/" rel="tag">规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A4%E8%AF%81/" rel="tag">认证</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9F%E8%BD%BD/" rel="tag">负载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%AF%E5%BE%84/" rel="tag">路径</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AC%E8%BD%BD/" rel="tag">转载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B/" rel="tag">进程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%82%E9%85%8D/" rel="tag">适配</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E7%BE%A4/" rel="tag">集群</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A2%84%E5%8A%A0%E8%BD%BD/" rel="tag">预加载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" rel="tag">领域驱动设计</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ACID/" style="font-size: 10px;">ACID</a> <a href="/tags/ASCII/" style="font-size: 10px;">ASCII</a> <a href="/tags/C/" style="font-size: 10px;">C</a> <a href="/tags/CQRS/" style="font-size: 12.86px;">CQRS</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/Event-Sourcing/" style="font-size: 11.43px;">Event Sourcing</a> <a href="/tags/Event-Store/" style="font-size: 10px;">Event Store</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Linux/" style="font-size: 14.29px;">Linux</a> <a href="/tags/PDO/" style="font-size: 10px;">PDO</a> <a href="/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/tags/SVN/" style="font-size: 11.43px;">SVN</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/URL/" style="font-size: 10px;">URL</a> <a href="/tags/UTF-8/" style="font-size: 10px;">UTF-8</a> <a href="/tags/Unix/" style="font-size: 10px;">Unix</a> <a href="/tags/Yii/" style="font-size: 17.14px;">Yii</a> <a href="/tags/crypt/" style="font-size: 10px;">crypt</a> <a href="/tags/csrf/" style="font-size: 10px;">csrf</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/ddd/" style="font-size: 12.86px;">ddd</a> <a href="/tags/flash/" style="font-size: 10px;">flash</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/iphone/" style="font-size: 10px;">iphone</a> <a href="/tags/mysql/" style="font-size: 18.57px;">mysql</a> <a href="/tags/pear/" style="font-size: 10px;">pear</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/python/" style="font-size: 12.86px;">python</a> <a href="/tags/retina/" style="font-size: 10px;">retina</a> <a href="/tags/safari/" style="font-size: 10px;">safari</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/unicode/" style="font-size: 10px;">unicode</a> <a href="/tags/xhprof/" style="font-size: 10px;">xhprof</a> <a href="/tags/xss/" style="font-size: 10px;">xss</a> <a href="/tags/%E4%BA%8B%E4%BB%B6/" style="font-size: 10px;">事件</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 12.86px;">事务</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 10px;">人工智能</a> <a href="/tags/%E4%BC%98%E9%85%B7/" style="font-size: 10px;">优酷</a> <a href="/tags/%E4%BD%93%E9%AA%8C/" style="font-size: 10px;">体验</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 10px;">分布式</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15.71px;">前端</a> <a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 10px;">加密</a> <a href="/tags/%E5%8E%9F%E7%A0%81/" style="font-size: 10px;">原码</a> <a href="/tags/%E5%8F%8D%E7%A0%81/" style="font-size: 10px;">反码</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 10px;">后端</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" style="font-size: 11.43px;">响应式</a> <a href="/tags/%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" style="font-size: 10px;">存储引擎</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 10px;">并发</a> <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 11.43px;">微服务</a> <a href="/tags/%E6%8E%88%E6%9D%83/" style="font-size: 10px;">授权</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 10px;">数学</a> <a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 10px;">架构</a> <a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 10px;">模板</a> <a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 10px;">线程</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size: 11.43px;">编码</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 10px;">网络</a> <a href="/tags/%E8%87%AA%E9%80%82%E5%BA%94/" style="font-size: 11.43px;">自适应</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 10px;">英语</a> <a href="/tags/%E8%8F%9C%E5%8D%95/" style="font-size: 10px;">菜单</a> <a href="/tags/%E8%A1%A5%E7%A0%81/" style="font-size: 10px;">补码</a> <a href="/tags/%E8%A7%84%E8%8C%83/" style="font-size: 10px;">规范</a> <a href="/tags/%E8%AE%A4%E8%AF%81/" style="font-size: 10px;">认证</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12.86px;">设计模式</a> <a href="/tags/%E8%B4%9F%E8%BD%BD/" style="font-size: 10px;">负载</a> <a href="/tags/%E8%B7%AF%E5%BE%84/" style="font-size: 10px;">路径</a> <a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 17.14px;">转载</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">运维</a> <a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 10px;">进程</a> <a href="/tags/%E9%80%82%E9%85%8D/" style="font-size: 10px;">适配</a> <a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 10px;">集群</a> <a href="/tags/%E9%A2%84%E5%8A%A0%E8%BD%BD/" style="font-size: 10px;">预加载</a> <a href="/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" style="font-size: 10px;">领域驱动设计</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/05/06/593/">什么是SNI？</a>
          </li>
        
          <li>
            <a href="/2018/12/04/584/">微服务模式：Saga</a>
          </li>
        
          <li>
            <a href="/2018/12/04/580/">微服务模式：一个服务一个数据库</a>
          </li>
        
          <li>
            <a href="/2018/12/04/577/">CQRS/ES架构下如何保证用户名的唯一性？</a>
          </li>
        
          <li>
            <a href="/2018/08/15/576/">编程中的hydration是什么意思</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Veitor<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>